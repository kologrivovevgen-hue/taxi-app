<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ĞŸĞ¾Ğ¿ÑƒÑ‚Ñ‡Ğ¸Ğº 2026</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; padding: 15px; color: #333; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #0088cc; margin-top: 0; }
        label { display: block; margin: 10px 0 5px; font-weight: bold; font-size: 14px; }
        select, input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        .option-row { display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: #f9f9f9; padding: 10px; border-radius: 8px; }
        .check-box { width: 22px; height: 22px; }
        .price-box { text-align: center; margin: 20px 0; padding: 15px; background: #e1f5fe; border-radius: 10px; border: 1px solid #b3e5fc; }
        #pr { font-size: 24px; font-weight: bold; color: #0288d1; }
        button { width: 100%; padding: 15px; background: #0088cc; color: white; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; }
        button:active { background: #0077b5; }
    </style>
</head>
<body>
    <div class="card">
        <h2>ğŸš• Ğ—Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ĞµĞ·Ğ´ĞºÑƒ</h2>
        
        <label>ğŸ“ ĞÑ‚ĞºÑƒĞ´Ğ°:</label>
        <select id="f" onchange="calc()">
            <option>ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™</option><option>ğŸ˜ï¸ ĞĞ¡Ğ¢ĞĞĞ˜ĞĞ</option><option>ğŸ¡ ĞŸĞ£Ğ”Ğ˜ĞĞ</option>
            <option>ğŸŒ¾ Ğ›Ğ£Ğ¨ĞĞ˜ĞšĞĞ’Ğ</option><option>ğŸ—ï¸ ĞšĞ£Ğ›ĞĞ¦ĞšĞ˜Ğ™</option><option>ğŸ  ĞšĞĞ›Ğ˜ĞĞ˜ĞĞ¡Ğš</option>
            <option>âœˆï¸ ĞĞ­Ğ ĞĞŸĞĞ Ğ¢</option><option>ğŸ Ğ”ĞĞ§Ğ˜</option>
        </select>

        <label>ğŸ ĞšÑƒĞ´Ğ°:</label>
        <select id="t" onchange="calc()">
            <option>ğŸ˜ï¸ ĞĞ¡Ğ¢ĞĞĞ˜ĞĞ</option><option>ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™</option><option>ğŸ¡ ĞŸĞ£Ğ”Ğ˜ĞĞ</option>
            <option>ğŸŒ¾ Ğ›Ğ£Ğ¨ĞĞ˜ĞšĞĞ’Ğ</option><option>ğŸ—ï¸ ĞšĞ£Ğ›ĞĞ¦ĞšĞ˜Ğ™</option><option>ğŸ  ĞšĞĞ›Ğ˜ĞĞ˜ĞĞ¡Ğš</option>
            <option>âœˆï¸ ĞĞ­Ğ ĞĞŸĞĞ Ğ¢</option><option>ğŸ Ğ”ĞĞ§Ğ˜</option>
        </select>

        <label>ğŸ“… Ğ”Ğ°Ñ‚Ğ°:</label>
        <select id="ds" onchange="calc()"></select>

        <label>â° Ğ’Ñ€ĞµĞ¼Ñ:</label>
        <input type="time" id="tm" onchange="calc()">

        <div class="option-row">
            <span>ğŸ“¦ Ğ‘Ğ°Ğ³Ğ°Ğ¶ / Ğ“Ñ€ÑƒĞ· (+50Ñ€)</span>
            <input type="checkbox" id="cargo" class="check-box" onchange="calc()">
        </div>

        <div class="option-row">
            <span>ğŸ‘¶ Ğ¡ Ğ´ĞµÑ‚ÑŒĞ¼Ğ¸ (+50Ñ€)</span>
            <input type="checkbox" id="kids" class="check-box" onchange="calc()">
        </div>

        <label>ğŸ›‘ ĞŸÑ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ (+50Ñ€/ĞµĞ´):</label>
        <input type="number" id="stops" value="0" min="0" onchange="calc()">

        <div class="price-box">
            <span>Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ:</span><br>
            <span id="pr">400Ñ€</span>
        </div>

        <button onclick="send()">ĞĞ¢ĞŸĞ ĞĞ’Ğ˜Ğ¢Ğ¬ Ğ—ĞĞ¯Ğ’ĞšĞ£</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        const P = {
            "ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™-ğŸ˜ï¸ ĞĞ¡Ğ¢ĞĞĞ˜ĞĞ": 300, "ğŸ˜ï¸ ĞĞ¡Ğ¢ĞĞĞ˜ĞĞ-ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™": 300,
            "ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™-ğŸ¡ ĞŸĞ£Ğ”Ğ˜ĞĞ": 350, "ğŸ¡ ĞŸĞ£Ğ”Ğ˜ĞĞ-ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™": 350,
            "ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™-ğŸŒ¾ Ğ›Ğ£Ğ¨ĞĞ˜ĞšĞĞ’Ğ": 400, "ğŸŒ¾ Ğ›Ğ£Ğ¨ĞĞ˜ĞšĞĞ’Ğ-ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™": 400,
            "ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™-ğŸ—ï¸ ĞšĞ£Ğ›ĞĞ¦ĞšĞ˜Ğ™": 450, "ğŸ—ï¸ ĞšĞ£Ğ›ĞĞ¦ĞšĞ˜Ğ™-ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™": 450,
            "ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™-ğŸ  ĞšĞĞ›Ğ˜ĞĞ˜ĞĞ¡Ğš": 500, "ğŸ  ĞšĞĞ›Ğ˜ĞĞ˜ĞĞ¡Ğš-ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™": 500,
            "ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™-ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™": 200, "ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™-âœˆï¸ ĞĞ­Ğ ĞĞŸĞĞ Ğ¢": 400,
            "âœˆï¸ ĞĞ­Ğ ĞĞŸĞĞ Ğ¢-ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™": 400, "ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™-ğŸ Ğ”ĞĞ§Ğ˜": 400,
            "ğŸ Ğ”ĞĞ§Ğ˜-ğŸŒ² ĞšĞ•Ğ”Ğ ĞĞ’Ğ«Ğ™": 400, "ğŸ  ĞšĞĞ›Ğ˜ĞĞ˜ĞĞ¡Ğš-âœˆï¸ ĞĞ­Ğ ĞĞŸĞĞ Ğ¢": 450,
            "ğŸ  ĞšĞĞ›Ğ˜ĞĞ˜ĞĞ¡Ğš-ğŸ Ğ”ĞĞ§Ğ˜": 950, "ğŸ—ï¸ ĞšĞ£Ğ›ĞĞ¦ĞšĞ˜Ğ™-ğŸ Ğ”ĞĞ§Ğ˜": 900,
            "ğŸŒ¾ Ğ›Ğ£Ğ¨ĞĞ˜ĞšĞĞ’Ğ-ğŸ Ğ”ĞĞ§Ğ˜": 850, "ğŸ¡ ĞŸĞ£Ğ”Ğ˜ĞĞ-ğŸ Ğ”ĞĞ§Ğ˜": 800,
            "ğŸ˜ï¸ ĞĞ¡Ğ¢ĞĞĞ˜ĞĞ-ğŸ Ğ”ĞĞ§Ğ˜": 750, "ğŸ˜ï¸ ĞĞ¡Ğ¢ĞĞĞ˜ĞĞ-âœˆï¸ ĞĞ­Ğ ĞĞŸĞĞ Ğ¢": 450
        };

        function fill() {
            const s = document.getElementById('ds');
            const now = new Date();
            for(let i=0; i<3; i++) {
                let d = new Date(); d.setDate(now.getDate() + i);
                let label = (i===0?"Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ ":(i===1?"Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ° ":"")) + d.toLocaleDateString('ru-RU',{month:'short',day:'numeric'});
                s.add(new Option(label, d.toISOString().split('T')[0]));
            }
            document.getElementById('tm').value = String(now.getHours()).padStart(2,'0')+":"+String(now.getMinutes()).padStart(2,'0');
        }

        function calc() {
            const ds = document.getElementById('ds');
            const tmInput = document.getElementById('tm');
            const now = new Date();
            
            if (ds.value === now.toISOString().split('T')[0]) {
                let cur = String(now.getHours()).padStart(2,'0')+":"+String(now.getMinutes()).padStart(2,'0');
                if (tmInput.value < cur) tmInput.value = cur;
            }

            let f = document.getElementById('f').value, t = document.getElementById('t').value;
            let base = P[f+"-"+t] || 400;
            
            let h = parseInt(tmInput.value.split(':')[0]);
            let n = (h >= 22 || h < 8);
            if(n) base *= 2;

            if(document.getElementById('cargo').checked) base += 50;
            if(document.getElementById('kids').checked) base += 50;
            base += (parseInt(document.getElementById('stops').value) * 50);

            document.getElementById('pr').innerText = base + "Ñ€" + (n ? " ğŸŒ™" : " â˜€ï¸");
        }

        function send() {
            tg.sendData(JSON.stringify({
                from: document.getElementById('f').value,
                to: document.getElementById('t').value,
                date: document.getElementById('ds').options[document.getElementById('ds').selectedIndex].text,
                time: document.getElementById('tm').value,
                cargo: document.getElementById('cargo').checked ? "Ğ”Ğ°" : "ĞĞµÑ‚",
                kids: document.getElementById('kids').checked ? "Ğ”Ğ°" : "ĞĞµÑ‚",
                stops: document.getElementById('stops').value,
                price: document.getElementById('pr').innerText
            }));
        }
        fill(); calc();
    </script>
</body>
</html>